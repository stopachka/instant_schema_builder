"use strict";
// (XXX): This is direct copy from @instantdb/core. Right now core is shared
// logic on the frontend, we have things like browser `fetch`. But actually
// we have some logic that is identical on both frontend and backend, so
// really we should probably have another `core` package
Object.defineProperty(exports, "__esModule", { value: true });
exports.getOps = exports.tx = void 0;
function transactionChunk(etype, id, prevOps) {
    return new Proxy({}, {
        get: (_target, cmd) => {
            if (cmd === "__ops")
                return prevOps;
            return (args) => {
                return transactionChunk(etype, id, [
                    ...prevOps,
                    [cmd, etype, id, args],
                ]);
            };
        },
    });
}
function etypeChunk(etype) {
    return new Proxy({}, {
        get(_target, id) {
            return transactionChunk(etype, id, []);
        },
    });
}
function emptyChunk() {
    return new Proxy({}, {
        get(_target, ns) {
            return etypeChunk(ns);
        },
    });
}
exports.tx = emptyChunk();
function getOps(x) {
    return x.__ops;
}
exports.getOps = getOps;
//# sourceMappingURL=instatx.js.map